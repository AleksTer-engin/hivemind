
–ö–û–ù–¢–†–ê–ö–¢–´ API HIVEMIND
üåê API Gateway (–ø–æ—Ä—Ç 8080)
POST /api/v1/documents ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
json
// –ó–∞–ø—Ä–æ—Å
{
  "content": "–¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞",
  "metadata": {
    "source": "web",
    "tags": ["important"]
  }
}

// –û—Ç–≤–µ—Ç
{
  "id": "uuid",
  "status": "processing",
  "task_id": "uuid"
}
GET /api/v1/documents/{id} ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
json
// –û—Ç–≤–µ—Ç
{
  "id": "uuid",
  "content": "–¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞",
  "metadata": {},
  "embeddings": ["uuid1", "uuid2"],
  "links": ["uuid3", "uuid4"],
  "created_at": "2026-02-22T12:00:00Z"
}
GET /api/v1/documents/{id}/similar ‚Äî –ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö
json
// –û—Ç–≤–µ—Ç
{
  "documents": [
    {
      "id": "uuid",
      "similarity": 0.95,
      "content": "–ü–æ—Ö–æ–∂–∏–π —Ç–µ–∫—Å—Ç"
    }
  ]
}
GET /api/v1/graph/{id} ‚Äî –≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞
json
// –û—Ç–≤–µ—Ç
{
  "nodes": [
    {"id": "uuid1", "content": "..."},
    {"id": "uuid2", "content": "..."}
  ],
  "edges": [
    {"from": "uuid1", "to": "uuid2", "type": "references"}
  ]
}
GET /api/v1/status ‚Äî —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
json
{
  "agents": {
    "total": 5,
    "active": 4,
    "dead": 1
  },
  "tasks": {
    "pending": 12,
    "processing": 3,
    "completed": 1245
  },
  "documents": 1250,
  "uptime": 3600
}
üì® NATS Event Contracts
–ö–∞–Ω–∞–ª: data.ingest
json
{
  "event_id": "uuid",
  "type": "document.created",
  "timestamp": "2026-02-22T12:00:00Z",
  "data": {
    "document_id": "uuid",
    "content": "...",
    "metadata": {}
  }
}
–ö–∞–Ω–∞–ª: data.classified
json
{
  "event_id": "uuid",
  "type": "document.classified",
  "timestamp": "2026-02-22T12:00:01Z",
  "data": {
    "document_id": "uuid",
    "tags": ["tech", "ai"],
    "confidence": 0.95
  }
}
–ö–∞–Ω–∞–ª: data.embedded
json
{
  "event_id": "uuid",
  "type": "document.embedded",
  "timestamp": "2026-02-22T12:00:02Z",
  "data": {
    "document_id": "uuid",
    "model": "all-MiniLM-L6-v2",
    "vector": [0.1, 0.2, ...]  // –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
  }
}
–ö–∞–Ω–∞–ª: data.linked
json
{
  "event_id": "uuid",
  "type": "links.created",
  "timestamp": "2026-02-22T12:00:03Z",
  "data": {
    "document_id": "uuid",
    "links": [
      {
        "target_id": "uuid2",
        "type": "similar",
        "weight": 0.87
      }
    ]
  }
}
–ö–∞–Ω–∞–ª: agent.heartbeat
json
{
  "agent_id": "uuid",
  "timestamp": "2026-02-22T12:00:00Z",
  "status": "active",
  "load": 0.3
}
üîß –ö–æ–¥—ã –æ—à–∏–±–æ–∫
–ö–æ–¥	–û–ø–∏—Å–∞–Ω–∏–µ
400	–ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
401	–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
404	–î–æ–∫—É–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
409	–ö–æ–Ω—Ñ–ª–∏–∫—Ç (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
422	–ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
429	–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
500	–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞
503	–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
EOF	
print_success "API_CONTRACTS.md —Å–æ–∑–¥–∞–Ω"

#==========================================
# 7. TEST_STRATEGY.md
#==========================================
print_section "–°–æ–∑–¥–∞–Ω–∏–µ TEST_STRATEGY.md"

cat > "$PROJECT_PATH/docs/TEST_STRATEGY.md" << 'EOF'

–°–¢–†–ê–¢–ï–ì–ò–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø HIVEMIND
üß™ –£—Ä–æ–≤–Ω–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1. –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ)
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –º–µ—Ç–æ–¥–æ–≤

–ú–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–æ–∫—Ä—ã—Ç–∏–µ: > 80%

2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (docker-compose.test.yml)
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

–†–µ–∞–ª—å–Ω—ã–µ –ë–î (test-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ NATS

3. E2E-—Ç–µ—Å—Ç—ã
–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚Üí –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ ‚Üí —Å–≤—è–∑–∏

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API Gateway

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

4. –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞

–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

üìä –ú–∞—Ç—Ä–∏—Ü–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	–Æ–Ω–∏—Ç	–ò–Ω—Ç–µ–≥—Ä	E2E	–ù–∞–≥—Ä—É–∑–∫–∞
API Gateway	‚úÖ	‚úÖ	‚úÖ	‚úÖ
Classifier	‚úÖ	‚úÖ	‚úÖ	‚úÖ
Embedder	‚¨ú	‚¨ú	‚¨ú	‚¨ú
Linker	‚¨ú	‚¨ú	‚¨ú	‚¨ú
UI	‚úÖ	‚úÖ	‚úÖ	‚¨ú
Postgres	‚úÖ	‚úÖ	‚¨ú	‚úÖ
Neo4j	‚úÖ	‚úÖ	‚¨ú	‚úÖ
Qdrant	‚úÖ	‚úÖ	‚¨ú	‚úÖ
NATS	‚úÖ	‚úÖ	‚¨ú	‚úÖ
Redis	‚úÖ	‚úÖ	‚¨ú	‚úÖ
üîÑ CI/CD –ø—Ä–æ—Ü–µ—Å—Å—ã
Pull Request (GitHub Actions)
yaml
- lint
- unit tests
- build
- integration tests
Merge –≤ main
yaml
- –≤—Å–µ –∏–∑ PR
- —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
- push –≤ registry
- –¥–µ–ø–ª–æ–π –Ω–∞ staging
- e2e —Ç–µ—Å—Ç—ã –Ω–∞ staging
–†–µ–ª–∏–∑ (tag)
yaml
- –≤—Å–µ –∏–∑ main
- –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –¥–µ–ø–ª–æ–π –Ω–∞ production
- smoke —Ç–µ—Å—Ç—ã
üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
–ú–µ—Ç—Ä–∏–∫–∞	–¢–µ–∫—É—â–∞—è	–¶–µ–ª—å
–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞	35%	80%
–í—Ä–µ–º—è –ø—Ä–æ–≥–æ–Ω–∞ —Ç–µ—Å—Ç–æ–≤	5 –º–∏–Ω	< 10 –º–∏–Ω
–ü—Ä–æ—Ü–µ–Ω—Ç —É–ø–∞–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤	2%	< 1%
MTTR (–≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)	2 —á–∞—Å–∞	< 30 –º–∏–Ω
üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
–ü–æ—Ç–µ—Ä—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î

–°–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è

–ó–∞–¥–∞—á–∏ –¥–æ–ª–∂–Ω—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –≤ –æ—á–µ—Ä–µ–¥—å

–ü–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

–î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç—É

–ó–∞–¥–∞—á–∏ –¥–ª—è —É–ø–∞–≤—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞

–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

–û—á–µ—Ä–µ–¥–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è
